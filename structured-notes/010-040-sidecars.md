

# 010-040 â€“ Sidecars

## Introduction to Sidecars

* **Timestamp:** 00:05
* ![Screenshot](../010-040-Sidecars/00_05_742.png)

In this course, you will often encounter the term **Sidecar**. To understand this, letâ€™s first take a real-world analogy:

ðŸ‘‰ Imagine a **motorcycle with a small passenger cabin attached on the side**. That small cabin is called a **sidecar**. Itâ€™s not the main motorcycle, but it supports and extends its functionality.

Similarly, in Kubernetes:

* **Pods** are the basic deployable units, and they can contain **one or more containers**.
* While the **main container** runs the **core business logic** of your application, sometimes we need **supporting containers** that handle auxiliary tasks.
* These supporting containers are called **sidecars (or sidecar containers)**.

---

## Characteristics of Sidecars

* **Run inside the same Pod** as the main container.
* **Share the same resources** such as:

  * **Network namespace** (can communicate over `localhost`).
  * **Volumes** (can read/write to the same shared storage).
* Perform **different responsibilities** from the main container, such as:

  * **Log shipping** (sending logs to a central logging system).
  * **Monitoring** (collecting metrics for observability).
  * **Configuration or file loading** (fetching configs dynamically).
  * **Proxying traffic** (as in the case of **Envoy in Istio**).
* Usually **lightweight and small in size**, so they donâ€™t add heavy overhead.

ðŸ“Œ **Key Idea**: Sidecars **decouple auxiliary concerns** (like logging, monitoring, security) from the main application logic, so developers can focus only on **business logic**.

---

## Example: Sidecar Pod Definition

* **Timestamp:** 01:26
* ![Screenshot](../010-040-Sidecars/01_26_642.png)

Hereâ€™s an example `pod.yml` file that demonstrates a pod with a **main container** and a **sidecar container**:

```yaml
containers:
  - name: nginx-container
    image: nginx
    volumeMounts:
      - name: shared-data
        mountPath: /usr/share/nginx/html

  - name: sidecar-container
    image: fluent/fluentd
    volumeMounts:
      - name: shared-data
        mountPath: /pod-data
```

### Explanation:

1. **Main Container (`nginx-container`)**

   * Runs the **Nginx web server**.
   * Mounts the volume `shared-data` at `/usr/share/nginx/html` to serve static files.

2. **Sidecar Container (`sidecar-container`)**

   * Runs **Fluentd**, a log collection agent.
   * Mounts the same `shared-data` volume at `/pod-data`.
   * Collects logs generated by Nginx and ships them to a central log server.

This setup demonstrates how sidecars **support the main container without interfering with its business logic**.

---

## Why Sidecars Are Important

* **Separation of Concerns**: Business logic remains clean and focused, while support tasks (logging, monitoring, proxying) are isolated.
* **Reusability**: Sidecar patterns (e.g., for logging or monitoring) can be reused across multiple applications.
* **Scalability**: As applications grow, sidecars ensure consistency in handling cross-cutting concerns.
* **Istio Relevance**: In Istio, the **Envoy proxy** is injected as a sidecar into each pod to manage networking, security, and observability.

---

## Transition

* **Timestamp:** 01:52
* ![Screenshot](../010-040-Sidecars/01_52_473.png)

Now that you understand **sidecars** and their role in Kubernetes, the next topic will introduce **Envoy**, which is the sidecar proxy used by Istio to handle service-to-service communication.

---
